<!doctype html>
<html lang="zh-TW" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Clean Up Disk Space in Linux | w0x7ce 的秘密花園 </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://me.w0x7ce.eu/zh-TW/blog/Clean-Up-Disk-Space-in-Linux"><meta data-rh="true" name="docusaurus_locale" content="zh-TW"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-TW"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Clean Up Disk Space in Linux | w0x7ce 的秘密花園 "><meta data-rh="true" name="description" content="df"><meta data-rh="true" property="og:description" content="df"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-08-12T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/tiarnking"><meta data-rh="true" property="article:tag" content="misc,Linux,Docker"><link data-rh="true" rel="icon" href="/zh-TW/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://me.w0x7ce.eu/zh-TW/blog/Clean-Up-Disk-Space-in-Linux"><link data-rh="true" rel="alternate" href="https://me.w0x7ce.eu/blog/Clean-Up-Disk-Space-in-Linux" hreflang="en"><link data-rh="true" rel="alternate" href="https://me.w0x7ce.eu/zh-TW/blog/Clean-Up-Disk-Space-in-Linux" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://me.w0x7ce.eu/blog/Clean-Up-Disk-Space-in-Linux" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-TW/blog/rss.xml" title="w0x7ce 的秘密花園  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-TW/blog/atom.xml" title="w0x7ce 的秘密花園  Atom Feed"><link rel="stylesheet" href="/zh-TW/assets/css/styles.8f32894b.css">
<link rel="preload" href="/zh-TW/assets/js/runtime~main.e28870b0.js" as="script">
<link rel="preload" href="/zh-TW/assets/js/main.724f1f81.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳至主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳至主要内容</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">We are looking to revamp our docs, please fill <a target="_blank" rel="noopener noreferrer" href="#">this survey</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-TW/"><div class="navbar__logo"><img src="/zh-TW/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-TW/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/zh-TW/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-TW/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tianrking/tianrking.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切換淺色/暗黑模式（當前為淺色模式）" aria-label="切換淺色/暗黑模式（當前為淺色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近部落格文章導覽"><div class="sidebarItemTitle_pO2u margin-bottom--md">All our posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/zh-TW/blog/Clean-Up-Disk-Space-in-Linux">Clean Up Disk Space in Linux</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Colly-Spider-Get-CoinMarket-Data">數字貨幣行情爬取 Colly實戰</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Ab压力测试">Ab压力测试</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Colly-Get-start">爬蟲框架 Colly</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Docker-ML-ENV-SETUP">Docker機器學習環境搭建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Conda-Install&amp;Setup">Conda Install &amp; Setup</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Awesome-CV-Project">Awesome-CV-Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/Docker-Getting-Srart-01">Docker使用方法(一)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/welcome">Welcome</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-TW/blog/About">About</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Clean Up Disk Space in Linux</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-08-12T00:00:00.000Z" itemprop="datePublished">2022年8月12日</time> · <!-- -->閱讀時間約 12 分鐘</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tiarnking" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/tianrking.png" alt="w0x7ce"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tiarnking" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">w0x7ce</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of w0x7ce.eu</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="df">df<a class="hash-link" href="#df" title="標題的直接連結">​</a></h2><p>df命令可以获取硬盘被占用了多少空间，目前还剩下多少空间等信息，它也可以显示所有文件系统对i节点和磁盘块的使用情况。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">df命令各个选项的含义如下：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -a：显示所有文件系统的磁盘使用情况，包括0块（block）的文件系统，如/proc文件系统。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k：以k字节为单位显示。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i：显示i节点信息，而不是磁盘块。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t：显示各指定类型的文件系统的磁盘空间使用情况。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -x：列出不是某一指定类型文件系统的磁盘空间使用情况（与t选项相反）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -T：显示文件系统类型。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu@VM-HK-w0x7ce:~$ </span><span class="token function" style="color:#d73a49">df</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem     1K-blocks    Used Available Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs             </span><span class="token number" style="color:#36acaa">202488</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">968</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">201520</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vda2       </span><span class="token number" style="color:#36acaa">51538380</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6022796</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">45499200</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            </span><span class="token number" style="color:#36acaa">1012440</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">24</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1012416</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs               </span><span class="token number" style="color:#36acaa">5120</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">5120</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs             </span><span class="token number" style="color:#36acaa">202488</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">202484</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run/user/1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第1列是代表文件系统对应的设备文件的路径名（一般是硬盘上的分区）；第2列给出分区包含的数据块（1024字节）的数目；第3，4列分别表示已用的和可用的数据块数目。</p><p>第3，4列块数之和不一定等于第2列中的块数。这是因为默认的每个分区都留了少量空间供系统管理员使用的缘故。即使遇到普通用户 空间已满的情况，管理员仍能登录和留有解决问题所需的工作空间。清单中Use%列表示普通用户空间使用的百分比，若这一数字达到100%，分区仍然留有系 统管理员使用的空间。</p><p>最后，Mounted on列表示文件系统的安装点。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="du-disk-usage">du （disk usage）<a class="hash-link" href="#du-disk-usage" title="標題的直接連結">​</a></h2><p>disk usage 含义为显示磁盘空间的使用情况，统计目录（或文件）所占磁盘空间的大小。该命令的功能是逐级进入指定目录的每一个子目录并显示该目录占用文件系统数据块（1024字节）的情况。若没有给出指定目录，则对当前目录进行统计。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">du命令各个选项的含义如下：  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -s：对每个Names参数只给出占用的数据块总数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -a：递归地显示指定目录中各文件及子目录中各文件占用的数据块数。若既不指定-s，也不指定-a，则只显示Names中的每一个目录及其中的各子目录所占的磁盘块数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -b：以字节为单位列出磁盘空间使用情况（系统默认以k字节为单位）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -k：以1024字节为单位列出磁盘空间使用情况。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -c：最后再加上一个总计（系统默认设置）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -l：计算所有的文件大小，对硬链接文件，则计算多次。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -x：跳过在不同文件系统上的目录不予统计。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ubuntu@VM-HK-w0x7ce:/etc$ </span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> -h ./apt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12K     ./apt/trusted.gpg.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K    ./apt/keyrings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64K     ./apt/apt.conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K    ./apt/auth.conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K    ./apt/preferences.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K    ./apt/sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K    ./apt/sources.list.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">104K    ./apt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tune2fs">tune2fs<a class="hash-link" href="#tune2fs" title="標題的直接連結">​</a></h2><p>tune2fs 命令用于调整文件系统的参数，是 ext2 及 ext3 文件系统常用的调整工具。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">df命令各个选项的含义如下：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -c 次数 </span><span class="token comment" style="color:#999988;font-style:italic">#挂载多少次后运行硬盘检查命令</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -e 行为 </span><span class="token comment" style="color:#999988;font-style:italic">#发现错误时的行为，包括continue（继续）、remount-on（挂载成只读）、panic（导致内核不稳定）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -f </span><span class="token comment" style="color:#999988;font-style:italic">#及时发现错误，仍强制执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -i 时间 </span><span class="token comment" style="color:#999988;font-style:italic">#检查的时间间隔， d 为天数， m 为月数， w 为周数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -j </span><span class="token comment" style="color:#999988;font-style:italic">#新建 ext3 日志式的文件系统</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -l </span><span class="token comment" style="color:#999988;font-style:italic">#显示文件系统的相关信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -L 标签 </span><span class="token comment" style="color:#999988;font-style:italic">#指定文件系统的标签名称</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -m 保留比例 </span><span class="token comment" style="color:#999988;font-style:italic">#指定对硬盘的保留比例，默认为 5%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看文件系统信息">查看文件系统信息<a class="hash-link" href="#查看文件系统信息" title="標題的直接連結">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@VM-HK-w0x7ce:/home/ubuntu</span><span class="token comment" style="color:#999988;font-style:italic"># tune2fs -l /dev/vda2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tune2fs </span><span class="token number" style="color:#36acaa">1.46</span><span class="token plain">.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token plain">-Dec-2021</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem volume name:   Disk_One</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last mounted on:          /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem UUID:          7bccaefa-b039-4ff6-bd32-22dde0066c0b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem magic number:  0xEF53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem revision </span><span class="token comment" style="color:#999988;font-style:italic">#:    1 (dynamic)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent 64bit flex_bg sparse_super large_file huge_file dir_nlink extra_isize metadata_csum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem flags:         signed_directory_hash </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Default </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> options:    user_xattr acl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem state:         clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Errors behavior:          Continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem OS type:       Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Inode count:              </span><span class="token number" style="color:#36acaa">3276800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Block count:              </span><span class="token number" style="color:#36acaa">13106683</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reserved block count:     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Overhead clusters:        </span><span class="token number" style="color:#36acaa">66747</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Free blocks:              </span><span class="token number" style="color:#36acaa">12042633</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Free inodes:              </span><span class="token number" style="color:#36acaa">3179795</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">First block:              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Block size:               </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fragment size:            </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group descriptor size:    </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reserved GDT blocks:      </span><span class="token number" style="color:#36acaa">1019</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Blocks per group:         </span><span class="token number" style="color:#36acaa">32768</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fragments per group:      </span><span class="token number" style="color:#36acaa">32768</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Inodes per group:         </span><span class="token number" style="color:#36acaa">8192</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Inode blocks per group:   </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flex block group size:    </span><span class="token number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem created:       Sun Apr </span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:03:06 </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> time:          Thu Jul </span><span class="token number" style="color:#36acaa">28</span><span class="token plain"> 09:59:27 </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last </span><span class="token function" style="color:#d73a49">write</span><span class="token plain"> time:          Fri Aug </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:45:27 </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mount count:              </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maximum </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> count:      -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last checked:             Sun Apr </span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:03:06 </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check interval:           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Lifetime writes:          </span><span class="token number" style="color:#36acaa">13</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reserved blocks uid:      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user root</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reserved blocks gid:      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group root</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">First inode:              </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Inode size:               </span><span class="token number" style="color:#36acaa">256</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Required extra isize:     </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Desired extra isize:      </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Journal inode:            </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">First orphan inode:       </span><span class="token number" style="color:#36acaa">15612</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Default directory hash:   half_md4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Directory Hash Seed:      06aeded3-785f-4aaa-8100-d3e54f41d421</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Journal backup:           inode blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checksum type:            crc32c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checksum:                 0xf004571c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="显示卷--更改卷名字">显示卷 &amp; 更改卷名字<a class="hash-link" href="#显示卷--更改卷名字" title="標題的直接連結">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@VM-HK-w0x7ce:/home/ubuntu</span><span class="token comment" style="color:#999988;font-style:italic"># tune2fs -l /dev/vda2 | grep volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem volume name:   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@VM-HK-w0x7ce:/home/ubuntu</span><span class="token comment" style="color:#999988;font-style:italic"># tune2fs -L w0x7ce_disk_01 /dev/vda2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tune2fs </span><span class="token number" style="color:#36acaa">1.46</span><span class="token plain">.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token plain">-Dec-2021</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@VM-HK-w0x7ce:/home/ubuntu</span><span class="token comment" style="color:#999988;font-style:italic"># tune2fs -l /dev/vda2 | grep volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem volume name:   w0x7ce_disk_01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="改变预留空间比例">改变预留空间比例<a class="hash-link" href="#改变预留空间比例" title="標題的直接連結">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@VM-HK-w0x7ce:/home/ubuntu</span><span class="token comment" style="color:#999988;font-style:italic"># tune2fs -m 1 /dev/vda2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tune2fs </span><span class="token number" style="color:#36acaa">1.46</span><span class="token plain">.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token plain">-Dec-2021</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting reserved blocks percentage to </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">131066</span><span class="token plain"> blocks</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="案例分析">案例分析<a class="hash-link" href="#案例分析" title="標題的直接連結">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:~</span><span class="token comment" style="color:#999988;font-style:italic"># df -h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udev             63G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   63G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.8M   13G   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda4       221G  217G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            63G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   63G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">.0M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">.0M   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            63G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   63G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop1      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.9M  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.9M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/shadowsocks-libev/508</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop5       56M   56M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/core18/2538</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop4      114M  114M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/core/13425</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda2       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.9G  100M  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.6G   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1       952M  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.4M  947M   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda3       215G  185G   20G  </span><span class="token number" style="color:#36acaa">91</span><span class="token plain">% /home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdb        </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.6T  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.8T  668G  </span><span class="token number" style="color:#36acaa">81</span><span class="token plain">% /storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop2      560M  560M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/pycharm-community/293</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   13G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop3      224M  224M     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/code/104</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/2e5c611e27c16368f4383de5c8ac6ae560f34d64160f08eb9a9e1e433daa6ac4/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   13G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/1008</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/84b5916793a1773e5835462fdd0467acb3576e94743cdc79c9e08504ac52ca31/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/5a7005e5cefa0a120fccb4855eab9bff258c6a950166faac2fd22c8cf2979484/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay         221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /var/lib/docker/overlay2/3ab0a88edd37a7e5df24d68b4e5f59f0aee2f01419b9a6f82b982e3f7e89ef79/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   13G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/1011</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   13G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-在根目录下寻找-大于-500m-的文件">Step 1 在根目录下寻找 大于 500M 的文件<a class="hash-link" href="#step-1-在根目录下寻找-大于-500m-的文件" title="標題的直接連結">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -size +500M -print0 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> -0 </span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> -h </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /root/AA.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /root/AA.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#type </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:g/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">STRING</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/d </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#global 文字 delete 删除 /storage /xxx 不相关行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后 删除对应无用文件</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-根据-filesystem-查看可疑文件系统">Step 2 根据 Filesystem 查看可疑文件系统<a class="hash-link" href="#step-2-根据-filesystem-查看可疑文件系统" title="標題的直接連結">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="overlay">overlay<a class="hash-link" href="#overlay" title="標題的直接連結">​</a></h4><p>首先 利用mount 查看 overlay 对应的路径</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:/var/lib/docker/overlay2</span><span class="token comment" style="color:#999988;font-style:italic"># mount -t  overlay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay on /var/lib/docker/overlay2/38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf/merged </span><span class="token builtin class-name">type</span><span class="token plain"> overlay </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rw,relatime,lowerdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/l/VPU3WEBK7ZSS4CAIEG2WSIDEWG:/var/lib/docker/overlay2/l/HJSGHVFPEIXPODVB2G6SGCVUKX:/var/lib/docker/overlay2/l/LQIBNX7UBIZU2AKHNK2G6V2KLV:/var/lib/docker/overlay2/l/KGEOYKQ734GFQEKUWZCSE6KFSL,upperdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf/diff,workdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf/work</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay on /var/lib/docker/overlay2/28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797/merged </span><span class="token builtin class-name">type</span><span class="token plain"> overlay </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rw,relatime,lowerdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/l/DHEKFL6D46UEDBR5PHWHN6UEHH:/var/lib/docker/overlay2/l/SNN7A2T7ZBXYKW2SXBQKSIX67C:/var/lib/docker/overlay2/l/FYK374GFEJZGCQQW2ALAIRHVSO:/var/lib/docker/overlay2/l/7HACMERHIGQR7JZQQGJNCKNUS7:/var/lib/docker/overlay2/l/QS6R2DYIBTBQRHOVGB4VHAWPV6:/var/lib/docker/overlay2/l/FKTA7IQF4JNBOFNRG353Q4T22C:/var/lib/docker/overlay2/l/IAWRXYRJ4V67KBVYV2TI5M7M4M:/var/lib/docker/overlay2/l/Y4G4HGVVSYPCSPGILFDLB5ITYI:/var/lib/docker/overlay2/l/STDB5J7V3YO3XUK5XNT7D6FEOG:/var/lib/docker/overlay2/l/YPRRYJ5PGWZ6BQ5NSLMEBYPB4I:/var/lib/docker/overlay2/l/RCUOIVTEDAON5N3DP3BVUQVXBH:/var/lib/docker/overlay2/l/U2F73KIPTHDRJA7NZVNJT4KHLI,upperdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797/diff,workdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/docker/overlay2/28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797/work</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>留意到</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/var/lib/docker/overlay2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>pushd 进相关目录</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">du</span><span class="token plain"> -h --max-depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如下输出</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:/var/lib/docker/overlay2</span><span class="token comment" style="color:#999988;font-style:italic"># du -h --max-depth=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.7G    ./7129b703bd58ba9d0217e3770050b5bfba57cfef6548eda21f1dd3b9a3c572bf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40K     ./28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797-init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24K     ./86e5ce373c451d537975223605338f787a218d361a7292ea93e1ab667e28e644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.8G    ./4718a3ed58149a869dea349ae80c487584a8ab3dd16a5d9f385eaf15bdb18a3a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">241M    ./38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40K     ./f39b75e04364d91c1ac074e3b797a670b9f8d419e693890b66967438fc7427e1-init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">78M     ./5cf6779b3682b5f40be1100134d3d6d6d763f1cc96193ad87b20ec20bbab301f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">292K    ./0df64755c145230dfad62016a000dc0d16302c868bf36e1c45af249af28eeaaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18G     ./f187076c8cc73e4212e7b59944af7665800961898f345c54d7210adddacdc0fe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18M     ./bfd5b5212714fa1ea875934e2fcdadc77d295fc614ead0f5eb69b2bc58440a79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14G     ./84b5916793a1773e5835462fdd0467acb3576e94743cdc79c9e08504ac52ca31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">749M    ./b23680886239a3b89d53948e1311bffa1c0e0dbaa0649f9dfc6df62b75c5c67d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32K     ./48477f6ae9617edff67f43e59c9b546bb1a228fa0212231ac662b1a0f2cfe1d5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32K     ./16ce11a5b972bba2b98cacd5609674e944e82770a79808040a297b70f951d238</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">116M    ./1b207660bbd786106a86ad125b12fc0525ec51d602a6cfef8e3ff5f6567f7cd3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36K     ./34253942384fd03637adbd7b959fab29e8e60c421f071e2a14f72452db97f1eb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18M     ./94d362e3e7a1e6efee5d373008a19e9e3cc4578541cbb140a13eabba3ff66a96</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70G     ./28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40K     ./36affaa6f22adb0d45e6b8f5c3ad9c92fbf50f0c53fc6518465c86a52429990f-init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">29M     ./80c6d1117ca7c8b64095c1e1f18bd7df9d916347031b6bd403521103443b7505</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">33M     ./8dd21e66d906381cbb62062e2aac36e863ad1e373c39facd9f3764a9144c09c4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11G     ./3ab0a88edd37a7e5df24d68b4e5f59f0aee2f01419b9a6f82b982e3f7e89ef79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">244G    </span><span class="token builtin class-name">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这时 我们可以利用grep 来检索对应的docker</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -q </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect --format </span><span class="token string" style="color:#e3116c">&#x27;{{.State.Pid}}, {{.Name}}, {{.GraphDriver.Data.WorkDir}}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;x&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如id含3的容器</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:/var/lib/docker/overlay2</span><span class="token comment" style="color:#999988;font-style:italic"># docker ps -q | xargs docker inspect --format &#x27;{{.State.Pid}}, {{.Name}}, {{.GraphDriver.Data.WorkDir}}&#x27; | grep &quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4637</span><span class="token plain">, /wanta7780, /var/lib/docker/overlay2/2e5c611e27c16368f4383de5c8ac6ae560f34d64160f08eb9a9e1e433daa6ac4/work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">17106</span><span class="token plain">, /nn2, /var/lib/docker/overlay2/3ab0a88edd37a7e5df24d68b4e5f59f0aee2f01419b9a6f82b982e3f7e89ef79/work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">15986</span><span class="token plain">, /chz, /var/lib/docker/overlay2/84b5916793a1773e5835462fdd0467acb3576e94743cdc79c9e08504ac52ca31/work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4384</span><span class="token plain">, /xpq, /var/lib/docker/overlay2/28bbbb41fef8d50f3ecf916b6134e3ba7e7348120fa78314df5ffdbe1dc7d797/work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">38783</span><span class="token plain">, /portainer, /var/lib/docker/overlay2/38ce2a2c8fadbb345c6c88e4023e2553a15580cef2852c121098679f6c4c2abf/work</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果找不到相关的容器，可能这就是之前的残留文件，直接 删除删除即可。</p><p>通过 df -h 我们可以看到 Used 下降了很多</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:/var/lib/docker/overlay2</span><span class="token comment" style="color:#999988;font-style:italic"># df -h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udev             63G     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   63G   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            13G  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.9M   13G   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda4       221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最后修改预留空间为 1%</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tune2fs -m </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> /dev/sda4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">df</span><span class="token plain"> -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">##可以看到</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda4       221G  214G  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.8G  </span><span class="token number" style="color:#36acaa">98</span><span class="token plain">% /</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@slave01:/var/lib/docker/overlay2</span><span class="token comment" style="color:#999988;font-style:italic"># sudo tune2fs -l /dev/sda4 | grep -i &#x27;block count&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Block count:              </span><span class="token number" style="color:#36acaa">59107328</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reserved block count:     </span><span class="token number" style="color:#36acaa">591073</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看出可用空间变多，完成空间释放</p><h1>Tips</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xargs-extended-arguments">xargs (eXtended ARGuments）<a class="hash-link" href="#xargs-extended-arguments" title="標題的直接連結">​</a></h2><ol><li><p>xargs 是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。</p></li><li><p>xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。</p></li><li><p>xargs 也可以将单行或多行文本输入转换为其他格式，例如多行变单行，单行变多行。</p></li><li><p>xargs 默认的命令是 echo，这意味着通过管道传递给 xargs 的输入将会包含换行和空白，不过通过 xargs 的处理，换行和空白将被空格取代。</p></li><li><p>xargs 是一个强有力的命令，它能够捕获一个命令的输出，然后传递给另外一个命令。</p></li></ol><p>xargs 一般是和管道一起使用。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">命令格式：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">somecommand </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> -item  </span><span class="token builtin class-name">command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">参数：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-a </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> 从文件中读入作为 stdin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-p 当每次执行一个argument的时候询问一次用户。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-t 表示先打印命令，然后再执行。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">，可以用 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> 代替。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-s num 命令行的最大字符数，指的是 </span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> 后面那个命令的最大命令行字符数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-L num 从标准输入一次读取 num 行送给 </span><span class="token builtin class-name">command</span><span class="token plain"> 命令。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-l 同 -L。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-x exit的意思，主要是配合-s使用</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>example</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> ./ -name </span><span class="token string" style="color:#e3116c">&quot;systemd*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> -i </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -r </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.bak </span><span class="token comment" style="color:#999988;font-style:italic">#寻找 systemd开头文件并备份</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>標籤：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh-TW/blog/tags/misc">misc</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh-TW/blog/tags/linux">Linux</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zh-TW/blog/tags/docker">Docker</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/tianrking/tianrking.github.io/edit/v3.0/blog/2022-08-12-Clean-Up-Disk-Space-in-Linux.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>編輯此頁</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="部落格文章分頁導覽"><a class="pagination-nav__link pagination-nav__link--next" href="/zh-TW/blog/Colly-Spider-Get-CoinMarket-Data"><div class="pagination-nav__sublabel">較舊一篇</div><div class="pagination-nav__label">數字貨幣行情爬取 Colly實戰</div></a></nav><div>Loading Comments...</div></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#df" class="table-of-contents__link toc-highlight">df</a></li><li><a href="#du-disk-usage" class="table-of-contents__link toc-highlight">du （disk usage）</a></li><li><a href="#tune2fs" class="table-of-contents__link toc-highlight">tune2fs</a><ul><li><a href="#查看文件系统信息" class="table-of-contents__link toc-highlight">查看文件系统信息</a></li><li><a href="#显示卷--更改卷名字" class="table-of-contents__link toc-highlight">显示卷 &amp; 更改卷名字</a></li><li><a href="#改变预留空间比例" class="table-of-contents__link toc-highlight">改变预留空间比例</a></li></ul></li><li><a href="#案例分析" class="table-of-contents__link toc-highlight">案例分析</a><ul><li><a href="#step-1-在根目录下寻找-大于-500m-的文件" class="table-of-contents__link toc-highlight">Step 1 在根目录下寻找 大于 500M 的文件</a></li><li><a href="#step-2-根据-filesystem-查看可疑文件系统" class="table-of-contents__link toc-highlight">Step 2 根据 Filesystem 查看可疑文件系统</a></li></ul></li><li><a href="#xargs-extended-arguments" class="table-of-contents__link toc-highlight">xargs (eXtended ARGuments）</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-TW/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tianrking" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://telegram.me/qozob" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/IIIIIlIlIIIllll" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:tian.r.king@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-TW/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tianrking/tianrking.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 w0x7ce. Thanks @meta</div></div></div></footer></div>
<script src="/zh-TW/assets/js/runtime~main.e28870b0.js"></script>
<script src="/zh-TW/assets/js/main.724f1f81.js"></script>
</body>
</html>